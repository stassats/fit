(in-package :fit)

(defparameter *message-types*
  '((0 . :file-id) (1 . :capabilities) (2 . :device-settings) (3 . :user-profile)
    (4 . :hrm-profile) (5 . :sdm-profile) (6 . :bike-profile) (7 . :zones-target)
    (8 . :hr-zone) (9 . :power-zone) (10 . :met-zone) (12 . :sport) (15 . :goal)
    (18 . :session) (19 . :lap) (20 . :record) (21 . :event) (23 . :device-info)
    (26 . :workout) (27 . :workout-step) (28 . :schedule) (30 . :weight-scale)
    (31 . :course) (32 . :course-point) (33 . :totals) (34 . :activity)
    (35 . :software) (37 . :file-capabilities) (38 . :mesg-capabilities)
    (39 . :field-capabilities) (49 . :file-creator) (51 . :blood-pressure)
    (53 . :speed-zone) (55 . :monitoring) (72 . :training-file) (78 . :hrv)
    (101 . :length) (103 . :monitoring-info) (105 . :pad) (106 . :slave-device)
    (131 . :cadence-zone) (145 . :memo-glob)))

(defparameter *message-subtypes*
  '((:activity
     (253 :timestamp :date-time) (0 :total-timer-time :uint32 1000)
     (1 :num-sessions :uint16 1) (2 :type :activity) (3 :event :event)
     (4 :event-type :event-type) (5 :local-timestamp :local-date-time)
     (6 :event-group :uint8))
    (:event
     (254 :message-index :message-index 1) (253 :timestamp :date-time)
     (0 :event :event) (1 :event-type :event-type) (2 :start-time :date-time 1)
     (3 :start-position-lat :sint32 1) (4 :start-position-long :sint32 1)
     (5 :sport :sport 1) (6 :sub-sport :sub-sport 1)
     (7 :total-elapsed-time :uint32 1000) (8 :total-timer-time :uint32 1000)
     (9 :total-distance :uint32 100) (10 :total-cycles :uint32 1)
     (11 :total-calories :uint16 1) (13 :total-fat-calories :uint16 1)
     (14 :avg-speed :uint16 1000) (15 :max-speed :uint16 1000)
     (16 :avg-heart-rate :uint8 1) (17 :max-heart-rate :uint8 1)
     (18 :avg-cadence :uint8 1) (19 :max-cadence :uint8 1)
     (20 :avg-power :uint16 1) (21 :max-power :uint16 1)
     (22 :total-ascent :uint16 1) (23 :total-descent :uint16 1)
     (24 :total-training-effect :uint8 10) (25 :first-lap-index :uint16 1)
     (26 :num-laps :uint16 1) (27 :event-group :uint8)
     (28 :trigger :session-trigger) (29 :nec-lat :sint32) (30 :nec-long :sint32)
     (31 :swc-lat :sint32) (32 :swc-long :sint32) (34 :normalized-power :uint16)
     (35 :training-stress-score :uint16 10) (36 :intensity-factor :uint16 1000)
     (37 :left-right-balance :left-right-balance-100)
     (41 :avg-stroke-count :uint32 10) (42 :avg-stroke-distance :uint16 100)
     (43 :swim-stroke :swim-stroke) (44 :pool-length :uint16 100)
     (45 :threshold-power :uint16) (46 :pool-length-unit :display-measure 1)
     (47 :num-active-lengths :uint16) (48 :total-work :uint32)
     (49 :avg-altitude :uint16 5) (50 :max-altitude :uint16 5)
     (51 :gps-accuracy :uint8) (52 :avg-grade :sint16 100)
     (53 :avg-pos-grade :sint16 100) (54 :avg-neg-grade :sint16 100)
     (55 :max-pos-grade :sint16 100) (56 :max-neg-grade :sint16 100)
     (57 :avg-temperature :sint8) (58 :max-temperature :sint8)
     (59 :total-moving-time :uint32 1000) (60 :avg-pos-vertical-speed :sint16 1000)
     (61 :avg-neg-vertical-speed :sint16 1000)
     (62 :max-pos-vertical-speed :sint16 1000)
     (63 :max-neg-vertical-speed :sint16 1000) (64 :min-heart-rate :uint8 1)
     (65 :time-in-hr-zone :uint32 1000) (66 :time-in-speed-zone :uint32 1000)
     (67 :time-in-cadence-zone :uint32 1000) (68 :time-in-power-zone :uint32 1000)
     (69 :avg-lap-time :uint32 1000) (70 :best-lap-index :uint16)
     (71 :min-altitude :uint16 5) (82 :player-score :uint16)
     (83 :opponent-score :uint16) (84 :opponent-name :string)
     (85 :stroke-count :uint16) (86 :zone-count :uint16)
     (87 :max-ball-speed :uint16 100) (88 :avg-ball-speed :uint16 100)
     (89 :avg-vertical-oscillation :uint16 10)
     (90 :avg-stance-time-percent :uint16 100) (91 :avg-stance-time :uint16 10)
     (92 :avg-fractional-cadence :uint8 128)
     (93 :max-fractional-cadence :uint8 128)
     (94 :total-fractional-cycles :uint8 128)
     (95 :avg-total-hemoglobin-conc :uint16 100)
     (96 :min-total-hemoglobin-conc :uint16 100)
     (97 :max-total-hemoglobin-conc :uint16 100)
     (98 :avg-saturated-hemoglobin-percent :uint16 10)
     (99 :min-saturated-hemoglobin-percent :uint16 10)
     (100 :max-saturated-hemoglobin-percent :uint16 10)
     (101 :avg-left-torque-effectiveness :uint8 2)
     (102 :avg-right-torque-effectiveness :uint8 2)
     (103 :avg-left-pedal-smoothness :uint8 2)
     (104 :avg-right-pedal-smoothness :uint8 2)
     (105 :avg-combined-pedal-smoothness :uint8 2) (111 :sport-index :uint8)
     (112 :time-standing :uint32 1000) (113 :stand-count :uint16)
     (114 :avg-left-pco :sint8) (115 :avg-right-pco :sint8)
     (116 :avg-left-power-phase :uint8 0.7111111)
     (117 :avg-left-power-phase-peak :uint8 0.7111111)
     (118 :avg-right-power-phase :uint8 0.7111111)
     (119 :avg-right-power-phase-peak :uint8 0.7111111)
     (120 :avg-power-position :uint16) (121 :max-power-position :uint16)
     (122 :avg-cadence-position :uint8) (123 :max-cadence-position :uint8)
     (124 :enhanced-avg-speed :uint32 1000) (125 :enhanced-max-speed :uint32 1000)
     (126 :enhanced-avg-altitude :uint32 5) (127 :enhanced-min-altitude :uint32 5)
     (128 :enhanced-max-altitude :uint32 5) (129 :avg-lev-motor-power :uint16)
     (130 :max-lev-motor-power :uint16) (131 :lev-battery-consumption :uint8 2))
    (:lap
     (254 :message-index :message-index 1) (253 :timestamp :date-time)
     (0 :event :event) (1 :event-type :event-type) (2 :start-time :date-time 1)
     (3 :start-position-lat :sint32 1) (4 :start-position-long :sint32 1)
     (5 :end-position-lat :sint32 1) (6 :end-position-long :sint32 1)
     (7 :total-elapsed-time :uint32 1000) (8 :total-timer-time :uint32 1000)
     (9 :total-distance :uint32 100) (10 :total-cycles :uint32)
     (11 :total-calories :uint16) (12 :total-fat-calories :uint16)
     (13 :avg-speed :uint16 1000) (14 :max-speed :uint16 1000)
     (15 :avg-heart-rate :uint8) (16 :max-heart-rate :uint8)
     (17 :avg-cadence :uint8) (18 :max-cadence :uint8) (19 :avg-power :uint16)
     (20 :max-power :uint16) (21 :total-ascent :uint16) (22 :total-descent :uint16)
     (23 :intensity :intensity) (24 :lap-trigger :lap-trigger) (25 :sport :sport)
     (26 :event-group :uint8) (32 :num-lengths :uint16)
     (33 :normalized-power :uint16)
     (34 :left-right-balance :left-right-balance-100)
     (35 :first-length-index :uint16 1) (37 :avg-stroke-distance :uint16 100)
     (38 :swim-stroke :swim-stroke) (39 :sub-sport :sub-sport 1)
     (40 :num-active-lengths :uint16) (41 :total-work :uint32)
     (42 :avg-altitude :uint16 5) (43 :max-altitude :uint16 5)
     (44 :gps-accuracy :uint8) (45 :avg-grade :sint16 100)
     (46 :avg-pos-grade :sint16 100) (47 :avg-neg-grade :sint16 100)
     (48 :max-pos-grade :sint16 100) (49 :max-neg-grade :sint16 100)
     (50 :avg-temperature :sint8) (51 :max-temperature :sint8)
     (52 :total-moving-time :uint32 1000) (53 :avg-pos-vertical-speed :sint16 1000)
     (54 :avg-neg-vertical-speed :sint16 1000)
     (55 :max-pos-vertical-speed :sint16 1000)
     (56 :max-neg-vertical-speed :sint16 1000) (57 :time-in-hr-zone :uint32 1000)
     (58 :time-in-speed-zone :uint32 1000) (59 :time-in-cadence-zone :uint32 1000)
     (60 :time-in-power-zone :uint32 1000) (61 :repetition-num :uint16)
     (62 :min-altitude :uint16 5) (63 :min-heart-rate :uint8 1)
     (71 :wkt-step-index :message-index) (74 :opponent-score :uint16)
     (75 :stroke-count :uint16) (76 :zone-count :uint16)
     (77 :avg-vertical-oscillation :uint16 10)
     (78 :avg-stance-time-percent :uint16 100) (79 :avg-stance-time :uint16 10)
     (80 :avg-fractional-cadence :uint8 128)
     (81 :max-fractional-cadence :uint8 128)
     (82 :total-fractional-cycles :uint8 128) (83 :player-score :uint16)
     (84 :avg-total-hemoglobin-conc :uint16 100)
     (85 :min-total-hemoglobin-conc :uint16 100)
     (86 :max-total-hemoglobin-conc :uint16 100)
     (87 :avg-saturated-hemoglobin-percent :uint16 10)
     (88 :min-saturated-hemoglobin-percent :uint16 10)
     (89 :max-saturated-hemoglobin-percent :uint16 10)
     (91 :avg-left-torque-effectiveness :uint8 2)
     (92 :avg-right-torque-effectiveness :uint8 2)
     (93 :avg-left-pedal-smoothness :uint8 2)
     (94 :avg-right-pedal-smoothness :uint8 2)
     (95 :avg-combined-pedal-smoothness :uint8 2) (98 :time-standing :uint32 1000)
     (99 :stand-count :uint16) (100 :avg-left-pco :sint8)
     (101 :avg-right-pco :sint8) (102 :avg-left-power-phase :uint8 0.7111111)
     (103 :avg-left-power-phase-peak :uint8 0.7111111)
     (104 :avg-right-power-phase :uint8 0.7111111)
     (105 :avg-right-power-phase-peak :uint8 0.7111111)
     (106 :avg-power-position :uint16) (107 :max-power-position :uint16)
     (108 :avg-cadence-position :uint8) (109 :max-cadence-position :uint8)
     (110 :enhanced-avg-speed :uint32 1000) (111 :enhanced-max-speed :uint32 1000)
     (112 :enhanced-avg-altitude :uint32 5) (113 :enhanced-min-altitude :uint32 5)
     (114 :enhanced-max-altitude :uint32 5) (115 :avg-lev-motor-power :uint16)
     (116 :max-lev-motor-power :uint16) (117 :lev-battery-consumption :uint8 2))
    (:record
     (253 :timestamp :date-time 1) (0 :position-lat :sint32 1)
     (1 :position-long :sint32 1) (2 :altitude :uint16 5) (3 :heart-rate :uint8 1)
     (4 :cadence :uint8 1) (5 :distance :uint32 100) (6 :speed :uint16 1000)
     (7 :power :uint16) (8 :compressed-speed-distance :byte (100 16))
     (9 :grade :sint16 100) (10 :resistance :uint8 1)
     (11 :time-from-course :sint32 1000) (12 :cycle-length :uint8 100)
     (13 :temperature :sint8) (17 :speed-1s :uint8 16) (18 :cycles :uint8)
     (19 :total-cycles :uint32) (28 :compressed-accumulated-power :uint16)
     (29 :accumulated-power :uint32) (30 :left-right-balance :left-right-balance)
     (31 :gps-accuracy :uint8) (32 :vertical-speed :sint16 1000)
     (33 :calories :uint16 1) (39 :vertical-oscillation :uint16 10)
     (40 :stance-time-percent :uint16 100) (41 :stance-time :uint16 10)
     (42 :activity-type :activity-type) (43 :left-torque-effectiveness :uint8 2)
     (44 :right-torque-effectiveness :uint8 2) (45 :left-pedal-smoothness :uint8 2)
     (46 :right-pedal-smoothness :uint8 2) (47 :combined-pedal-smoothness :uint8 2)
     (48 :time128 :uint8 128) (49 :stroke-type :stroke-type) (50 :zone :uint8)
     (51 :ball-speed :uint16 100) (52 :cadence256 :uint16 256)
     (53 :fractional-cadence :uint8 128) (54 :total-hemoglobin-conc :uint16 100)
     (55 :total-hemoglobin-conc-min :uint16 100)
     (56 :total-hemoglobin-conc-max :uint16 100)
     (57 :saturated-hemoglobin-percent :uint16 10)
     (58 :saturated-hemoglobin-percent-min :uint16 10)
     (59 :saturated-hemoglobin-percent-max :uint16 10)
     (62 :device-index :device-index) (67 :left-pco :sint8) (68 :right-pco :sint8)
     (69 :left-power-phase :uint8 0.7111111)
     (70 :left-power-phase-peak :uint8 0.7111111)
     (71 :right-power-phase :uint8 0.7111111)
     (72 :right-power-phase-peak :uint8 0.7111111)
     (73 :enhanced-speed :uint32 1000) (78 :enhanced-altitude :uint32 5)
     (81 :battery-soc :uint8 2) (82 :motor-power :uint16))
    (:device-info
     (253 :timestamp :date-time 1) (0 :device-index :device-index 1)
     (1 :device-type :uint8 1) (2 :manufacturer :manufacturer 1)
     (3 :serial-number :uint32z 1) (4 :product :uint16 1)
     (5 :software-version :uint16 100) (6 :hardware-version :uint8 1)
     (7 :cum-operating-time :uint32 1) (10 :battery-voltage :uint16 256)
     (11 :battery-status :battery-status) (18 :sensor-position :body-location)
     (19 :descriptor :string) (20 :ant-transmission-type :uint8z)
     (21 :ant-device-number :uint16z) (22 :ant-network :ant-network)
     (25 :source-type :source-type))
    (:session
     (254 :message-index :message-index 1) (253 :timestamp :date-time)
     (0 :event :event) (1 :event-type :event-type) (2 :start-time :date-time 1)
     (3 :start-position-lat :sint32 1) (4 :start-position-long :sint32 1)
     (5 :sport :sport 1) (6 :sub-sport :sub-sport 1)
     (7 :total-elapsed-time :uint32 1000) (8 :total-timer-time :uint32 1000)
     (9 :total-distance :uint32 100) (10 :total-cycles :uint32 1)
     (11 :total-calories :uint16 1) (13 :total-fat-calories :uint16 1)
     (14 :avg-speed :uint16 1000) (15 :max-speed :uint16 1000)
     (16 :avg-heart-rate :uint8 1) (17 :max-heart-rate :uint8 1)
     (18 :avg-cadence :uint8 1) (19 :max-cadence :uint8 1)
     (20 :avg-power :uint16 1) (21 :max-power :uint16 1)
     (22 :total-ascent :uint16 1) (23 :total-descent :uint16 1)
     (24 :total-training-effect :uint8 10) (25 :first-lap-index :uint16 1)
     (26 :num-laps :uint16 1) (27 :event-group :uint8)
     (28 :trigger :session-trigger) (29 :nec-lat :sint32) (30 :nec-long :sint32)
     (31 :swc-lat :sint32) (32 :swc-long :sint32) (34 :normalized-power :uint16)
     (35 :training-stress-score :uint16 10) (36 :intensity-factor :uint16 1000)
     (37 :left-right-balance :left-right-balance-100)
     (41 :avg-stroke-count :uint32 10) (42 :avg-stroke-distance :uint16 100)
     (43 :swim-stroke :swim-stroke) (44 :pool-length :uint16 100)
     (45 :threshold-power :uint16) (46 :pool-length-unit :display-measure 1)
     (47 :num-active-lengths :uint16) (48 :total-work :uint32)
     (49 :avg-altitude :uint16 5) (50 :max-altitude :uint16 5)
     (51 :gps-accuracy :uint8) (52 :avg-grade :sint16 100)
     (53 :avg-pos-grade :sint16 100) (54 :avg-neg-grade :sint16 100)
     (55 :max-pos-grade :sint16 100) (56 :max-neg-grade :sint16 100)
     (57 :avg-temperature :sint8) (58 :max-temperature :sint8)
     (59 :total-moving-time :uint32 1000) (60 :avg-pos-vertical-speed :sint16 1000)
     (61 :avg-neg-vertical-speed :sint16 1000)
     (62 :max-pos-vertical-speed :sint16 1000)
     (63 :max-neg-vertical-speed :sint16 1000) (64 :min-heart-rate :uint8 1)
     (65 :time-in-hr-zone :uint32 1000) (66 :time-in-speed-zone :uint32 1000)
     (67 :time-in-cadence-zone :uint32 1000) (68 :time-in-power-zone :uint32 1000)
     (69 :avg-lap-time :uint32 1000) (70 :best-lap-index :uint16)
     (71 :min-altitude :uint16 5) (82 :player-score :uint16)
     (83 :opponent-score :uint16) (84 :opponent-name :string)
     (85 :stroke-count :uint16) (86 :zone-count :uint16)
     (87 :max-ball-speed :uint16 100) (88 :avg-ball-speed :uint16 100)
     (89 :avg-vertical-oscillation :uint16 10)
     (90 :avg-stance-time-percent :uint16 100) (91 :avg-stance-time :uint16 10)
     (92 :avg-fractional-cadence :uint8 128)
     (93 :max-fractional-cadence :uint8 128)
     (94 :total-fractional-cycles :uint8 128)
     (95 :avg-total-hemoglobin-conc :uint16 100)
     (96 :min-total-hemoglobin-conc :uint16 100)
     (97 :max-total-hemoglobin-conc :uint16 100)
     (98 :avg-saturated-hemoglobin-percent :uint16 10)
     (99 :min-saturated-hemoglobin-percent :uint16 10)
     (100 :max-saturated-hemoglobin-percent :uint16 10)
     (101 :avg-left-torque-effectiveness :uint8 2)
     (102 :avg-right-torque-effectiveness :uint8 2)
     (103 :avg-left-pedal-smoothness :uint8 2)
     (104 :avg-right-pedal-smoothness :uint8 2)
     (105 :avg-combined-pedal-smoothness :uint8 2) (111 :sport-index :uint8)
     (112 :time-standing :uint32 1000) (113 :stand-count :uint16)
     (114 :avg-left-pco :sint8) (115 :avg-right-pco :sint8)
     (116 :avg-left-power-phase :uint8 0.7111111)
     (117 :avg-left-power-phase-peak :uint8 0.7111111)
     (118 :avg-right-power-phase :uint8 0.7111111)
     (119 :avg-right-power-phase-peak :uint8 0.7111111)
     (120 :avg-power-position :uint16) (121 :max-power-position :uint16)
     (122 :avg-cadence-position :uint8) (123 :max-cadence-position :uint8)
     (124 :enhanced-avg-speed :uint32 1000) (125 :enhanced-max-speed :uint32 1000)
     (126 :enhanced-avg-altitude :uint32 5) (127 :enhanced-min-altitude :uint32 5)
     (128 :enhanced-max-altitude :uint32 5) (129 :avg-lev-motor-power :uint16)
     (130 :max-lev-motor-power :uint16) (131 :lev-battery-consumption :uint8 2))))
